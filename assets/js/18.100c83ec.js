(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{184:function(t,a,e){"use strict";e.r(a);var r=e(0),s=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content"},[e("h1",{attrs:{id:"jenkins-web-任务配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-web-任务配置","aria-hidden":"true"}},[t._v("#")]),t._v(" Jenkins Web 任务配置")]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"依赖准备"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#依赖准备","aria-hidden":"true"}},[t._v("#")]),t._v(" 依赖准备")]),t._v(" "),e("h3",{attrs:{id:"docker-部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-部署","aria-hidden":"true"}},[t._v("#")]),t._v(" Docker 部署")]),t._v(" "),e("p",[t._v("就像 reliable-web 一样，Reliable 环境配置倾向于容器化，推荐你使用 Android Docker 容器运行任务。")]),t._v(" "),e("h2",{attrs:{id:"示例工程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#示例工程","aria-hidden":"true"}},[t._v("#")]),t._v(" 示例工程")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"//github.com/app-bootstrap/web-app-bootstrap"}},[t._v("web-app-bootstrap")])])]),t._v(" "),e("h2",{attrs:{id:"快速上手"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#快速上手","aria-hidden":"true"}},[t._v("#")]),t._v(" 快速上手")]),t._v(" "),e("h3",{attrs:{id:"第1步-创建任务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第1步-创建任务","aria-hidden":"true"}},[t._v("#")]),t._v(" 第1步 - 创建任务")]),t._v(" "),e("p",[t._v("Create a new item named "),e("code",[t._v("web-app-bootstrap")]),t._v(", and select the "),e("code",[t._v("Freestyle project")]),t._v(" mode.")]),t._v(" "),e("div",{attrs:{align:"center"}},[e("img",{attrs:{src:"https://wx2.sinaimg.cn/large/6d308bd9gy1ftc27q3vd3j21kw128tpk.jpg",width:"75%"}})]),t._v(" "),e("h3",{attrs:{id:"第2步-scm-配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第2步-scm-配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 第2步 - SCM 配置")]),t._v(" "),e("div",{attrs:{align:"center"}},[e("img",{attrs:{src:"https://wx1.sinaimg.cn/large/6d308bd9gy1ftc27pr7xuj21kw128gzp.jpg",width:"75%"}})]),t._v(" "),e("p",[t._v("Please input the "),e("code",[t._v("web-app-bootstrap")]),t._v(" git url, and set the clone depth to "),e("code",[t._v("1")]),t._v(", branch to "),e("code",[t._v("master")]),t._v(" is ok.")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("https://github.com/app-bootstrap/web-app-bootstrap.git\n")])])]),e("h3",{attrs:{id:"第3步-构建脚本配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第3步-构建脚本配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 第3步 - 构建脚本配置")]),t._v(" "),e("p",[e("strong",[t._v("注意")])]),t._v(" "),e("ul",[e("li",[t._v("请确保勾选构建前删除运行空间，以排除老的中间文件造成的问题。")])]),t._v(" "),e("div",{attrs:{align:"center"}},[e("img",{attrs:{src:"https://wx4.sinaimg.cn/large/6d308bd9gy1ftc27nq3rsj21kw12j7if.jpg",width:"75%"}})]),t._v(" "),e("p",[t._v("我们提供 Web 构建 Docker 镜像 "),e("code",[t._v("macacajs/macaca-electron-docker")]),t._v("，你可以设置如下：")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('docker stop $JOB_NAME || true && docker rm $JOB_NAME || true\n\ndocker run --rm \\\n  --name $JOB_NAME \\\n  -e JOB_NAME \\\n  -e BUILD_NUMBER \\\n  -e RELIABLE_SERVER_URL=http://129.168.1.102:9900 \\\n  -v $HOME/reliable_home/static:/static \\\n  -v $WORKSPACE:/root/src \\\n  macacajs/macaca-electron-docker \\\n  bash -c "cd /root/src && npm run ci"\n')])])]),e("p",[e("strong",[t._v("注意")])]),t._v(" "),e("ul",[e("li",[t._v("请确认 "),e("code",[t._v("RELIABLE_SERVER_URL")]),t._v(" 已经正确配置，可以是一个 IPV4 或者某个 url，否则会遇到如下问题：")])]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("error: TypeError: Cannot read property 'server' of undefined\n    at _.postToGW (/root/src/node_modules/reliable-cli/lib/helper.js:31:66)\n    at ReportCommand.pushToWebhook (/root/src/node_modules/reliable-cli/lib/report-command.js:130:18)\n    at ReportCommand._run (/root/src/node_modules/reliable-cli/lib/report-command.js:70:35)\n    at <anonymous>\n    at process._tickCallback (internal/process/next_tick.js:188:7)\nnpm ERR! code ELIFECYCLE\nnpm ERR! errno 1\nnpm ERR! web-app-bootstrap@1.0.8 reliable: `reliable report -c ./reliable.config.js`\nnpm ERR! Exit status 1\n")])])]),e("h3",{attrs:{id:"第4步-立即构建"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第4步-立即构建","aria-hidden":"true"}},[t._v("#")]),t._v(" 第4步 - 立即构建")]),t._v(" "),e("p",[t._v("构建结束后，你可以在 reliable web 平台获得构建结果。")]),t._v(" "),e("div",{attrs:{align:"center"}},[e("img",{attrs:{src:"https://wx4.sinaimg.cn/large/6d308bd9gy1ft3nqcab4vj21kw0xxwn0.jpg",width:"75%"}})]),t._v(" "),e("p",[t._v("We cat get the build results of the "),e("code",[t._v("web-app-bootstrap")]),t._v(".")]),t._v(" "),e("div",{attrs:{align:"center"}},[e("img",{attrs:{src:"https://wx3.sinaimg.cn/large/6d308bd9gy1ft3nqcmte5j21kw0xxdm6.jpg",width:"75%"}})]),t._v(" "),e("p",[t._v("我们也可以获得项目配置，版本等额外信息。如果需要更多上报信息可以参考上报脚本文档 "),e("a",{attrs:{href:"//github.com/macacajs/reliable-cli#configuration"}},[t._v("reliable-cli#configuration")]),t._v("。")]),t._v(" "),e("h3",{attrs:{id:"第5步-自动化测试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#第5步-自动化测试","aria-hidden":"true"}},[t._v("#")]),t._v(" 第5步 - 自动化测试")]),t._v(" "),e("p",[t._v("Reliable 无缝集成 Macaca 自动化测试工具，支持通过率报告，端到端链路刻画，覆盖率等质量覆盖方案。")]),t._v(" "),e("div",{attrs:{align:"center"}},[e("img",{attrs:{src:"https://wx4.sinaimg.cn/large/6d308bd9gy1ft3nqbd9e3j21kw0xx45p.jpg",width:"75%"}})]),t._v(" "),e("div",{attrs:{align:"center"}},[e("img",{attrs:{src:"https://wx3.sinaimg.cn/large/6d308bd9gy1ft3nqbgjesj21kw0xx7ee.jpg",width:"75%"}})]),t._v(" "),e("div",{attrs:{align:"center"}},[e("img",{attrs:{src:"https://wx2.sinaimg.cn/large/6d308bd9gy1ft3nqbnft5j21kw0xxaq1.jpg",width:"75%"}})]),t._v(" "),e("div",{attrs:{align:"center"}},[e("img",{attrs:{src:"https://wx1.sinaimg.cn/large/6d308bd9gy1ft3nqd3c7fj21kw0xxqcj.jpg",width:"75%"}})]),t._v(" "),e("div",{attrs:{align:"center"}},[e("img",{attrs:{src:"https://wx2.sinaimg.cn/large/6d308bd9gy1ft3nqcraoij21kw0xxjyt.jpg",width:"75%"}})])])}],!1,null,null,null);s.options.__file="jenkins-web.md";a.default=s.exports}}]);